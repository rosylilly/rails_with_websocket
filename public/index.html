<!DOCTYPE html>
<html>
  <head>
    <title>Rails with WebSocket</title>
    <meta charset="UTF-8">
  </head>
  <body>
    <h1>Rails with WebSocket</h1>

    <div id="console">
    </div>

    <script type="text/javascript">
      var debugWindow = document.getElementById('console');
      var debug = function(message) {
        console.debug(message);
        debugWindow.innerHTML += [message, '<br>'].join('');
      };

      var ws = new WebSocket('ws://localhost:3000/ws');
      ws.onopen = function() {
        debug('WebSocket opened');
      };

      ws.onmessage = function(message) {
        debug(message.data);
      };

      ws.onclose = function() {
        debug('WebSocket closed');
      };
    </script>
  </body>
</html>
